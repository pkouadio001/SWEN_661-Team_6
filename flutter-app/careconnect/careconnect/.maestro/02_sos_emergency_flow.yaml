appId: com.example.careconnect
---
# E2E Test 2: SOS Emergency Flow
- launchApp

# Wait for ANYTHING to appear (30 seconds)
- extendedWaitUntil:
    visible:
      text: ".*"
    timeout: 30000

# Try to find Welcome message (means we're on dashboard)
- extendedWaitUntil:
    visible: "Welcome, John Doe"
    timeout: 25000

# If not found, try logging in
- runFlow:
    when:
      visible: "LOGIN"
    commands:
      - tapOn: "LOGIN"
      - extendedWaitUntil:
          visible: "Welcome, John Doe"
          timeout: 25000

# Now look for ANY dashboard element
- runFlow:
    when:
      visible: "Profile & Settings"
    commands:
      - assertVisible: "Profile & Settings"

# Try to find SOS button by scrolling if needed
- scroll

# Now try SOS button
- extendedWaitUntil:
    visible: "SOS EMERGENCY"
    timeout: 20000

- assertVisible: "SOS EMERGENCY"

# Tap it
- tapOn: "SOS EMERGENCY"

# Wait for dialog
- extendedWaitUntil:
    visible: "Emergency Alert"
    timeout: 10000

- assertVisible: "Cancel"
- tapOn: "Cancel"